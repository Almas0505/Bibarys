# üéâ BIBARYS E-COMMERCE BACKEND - –ó–ê–í–ï–†–®–ï–ù

## –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
**2024** - Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìã –ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–• –§–£–ù–ö–¶–ò–ô

### 1. –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø –ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø–æ–∫—É–ø–∞—Ç–µ–ª–∏, –ø—Ä–æ–¥–∞–≤—Ü—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)
- ‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints
- ‚úÖ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- ‚úÖ –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (customer, seller, admin)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoints:**
- `POST /api/v1/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/v1/auth/login` - –í—Ö–æ–¥
- `GET /api/v1/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `PUT /api/v1/auth/profile` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

---

### 2. –£–ü–†–ê–í–õ–ï–ù–ò–ï –¢–û–í–ê–†–ê–ú–ò
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥–∞–≤—Ü—ã)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (electronics, clothing, food, books, etc.)
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ ID
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤

**Endpoints:**
- `GET /api/v1/products` - –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–ø—É–±–ª–∏—á–Ω—ã–π)
- `GET /api/v1/products/{id}` - –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞
- `POST /api/v1/products` - –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä (–ø—Ä–æ–¥–∞–≤–µ—Ü)
- `PUT /api/v1/products/{id}` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
- `DELETE /api/v1/products/{id}` - –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- electronics, clothing, food, books, toys, sports, home, beauty, other

---

### 3. –ö–û–†–ó–ò–ù–ê –ü–û–ö–£–ü–û–ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ—Ä–∑–∏–Ω—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –æ–±—â–µ–π —Å—É–º–º—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–∞

**Endpoints:**
- `GET /api/v1/cart` - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ—Ä–∑–∏–Ω—ã
- `POST /api/v1/cart/items` - –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
- `PUT /api/v1/cart/items/{product_id}` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `DELETE /api/v1/cart/items/{product_id}` - –£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
- `DELETE /api/v1/cart` - –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É

---

### 4. –ó–ê–ö–ê–ó–´
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞
- ‚úÖ –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–æ–≤ (–ø–æ–∫—É–ø–∞—Ç–µ–ª—å)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ (–ø—Ä–æ–¥–∞–≤–µ—Ü)
- ‚úÖ –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è tracking –Ω–æ–º–µ—Ä–∞
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤

**–°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤:**
- pending, confirmed, processing, shipped, delivered, cancelled, refunded

**–°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏:**
- standard (5-7 –¥–Ω–µ–π, 1500 ‚Ç∏)
- express (2-3 –¥–Ω—è, 3000 ‚Ç∏)
- same_day (—Å–µ–≥–æ–¥–Ω—è, 5000 ‚Ç∏)

**Endpoints:**
- `POST /api/v1/orders` - –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
- `GET /api/v1/orders` - –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
- `GET /api/v1/orders/{id}` - –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
- `PUT /api/v1/orders/{id}/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑
- `PUT /api/v1/orders/{id}/status` - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å (–ø—Ä–æ–¥–∞–≤–µ—Ü)

---

### 5. –û–¢–ó–´–í–´
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ (—Ç–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ —Å –∑–∞–∫–∞–∑–∞–º–∏)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Ç–æ–≤–∞—Ä
- ‚úÖ –û—Ü–µ–Ω–∫–∞ –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –æ—Ç–∑—ã–≤–∞–º
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞

**Endpoints:**
- `POST /api/v1/reviews` - –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
- `GET /api/v1/reviews` - –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤—ã (–ø–æ product_id)
- `PUT /api/v1/reviews/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–∑—ã–≤
- `DELETE /api/v1/reviews/{id}` - –£–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤

---

### 6. –ò–ó–ë–†–ê–ù–ù–û–ï (WISHLIST)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º

**Endpoints:**
- `GET /api/v1/wishlist` - –°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- `POST /api/v1/wishlist/items` - –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- `DELETE /api/v1/wishlist/items/{product_id}` - –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

---

### 7. –ü–õ–ê–¢–ï–ñ–ò
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π (–¥–µ–º–æ-—Ä–µ–∂–∏–º)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è transaction ID
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã

**–ú–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã:**
- card, kaspi, cash_on_delivery

**–°—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π:**
- pending, processing, completed, failed, refunded

**Endpoints:**
- `POST /api/v1/payments` - –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
- `GET /api/v1/payments/{id}` - –î–µ—Ç–∞–ª–∏ –ø–ª–∞—Ç–µ–∂–∞
- `GET /api/v1/payments/order/{order_id}` - –ü–ª–∞—Ç–µ–∂–∏ –∑–∞–∫–∞–∑–∞

---

### 8. –ü–ê–ù–ï–õ–¨ –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê
- ‚úÖ –î–∞—à–±–æ—Ä–¥ —Å –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤
- –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞

**Endpoints:**
- `GET /api/v1/admin/dashboard` - –î–∞—à–±–æ—Ä–¥
- `GET /api/v1/admin/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- `GET /api/v1/admin/users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `PUT /api/v1/admin/users/{id}/role` - –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
- `PUT /api/v1/admin/users/{id}/block` - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
- `PUT /api/v1/admin/users/{id}/unblock` - –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å

---

### 9. –ü–ê–ù–ï–õ–¨ –ü–†–û–î–ê–í–¶–ê
- ‚úÖ –°–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –ó–∞–∫–∞–∑—ã —Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂

**Endpoints:**
- `GET /api/v1/seller/products` - –ú–æ–∏ —Ç–æ–≤–∞—Ä—ã
- `GET /api/v1/seller/orders` - –ú–æ–∏ –∑–∞–∫–∞–∑—ã
- `GET /api/v1/seller/analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂

---

### 10. –ê–ù–ê–õ–ò–¢–ò–ö–ê
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
- ‚úÖ –¢–æ–ø —Ç–æ–≤–∞—Ä—ã
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –î–æ—Ö–æ–¥ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- ‚úÖ –û–±—â–∏–π –¥–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**Endpoints:**
- `GET /api/v1/analytics/sales` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
- `GET /api/v1/analytics/products` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/v1/analytics/users` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/v1/analytics/dashboard` - –û–±—â–∏–π –¥–∞—à–±–æ—Ä–¥

---

## üõ† –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### Backend
- **FastAPI** 0.109.0 - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π async —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** 2.0.36 - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **Pydantic** 2.x - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Python-Jose** - JWT —Ç–æ–∫–µ–Ω—ã
- **Passlib + Bcrypt** - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –õ–µ–≥–∫–∞—è, —Ñ–∞–π–ª–æ–≤–∞—è –ë–î (–º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ PostgreSQL)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Alembic (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Layered Architecture**
  - API Layer (FastAPI endpoints)
  - Service Layer (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
  - Data Layer (SQLAlchemy models)
  - Schema Layer (Pydantic models)
- **Dependency Injection** –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **Repository Pattern** –¥–ª—è –ë–î
- **JWT Authentication** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üìä –ú–û–î–ï–õ–ò –î–ê–ù–ù–´–•

### User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
```python
- id: UUID
- email: String (unique)
- password_hash: String
- first_name: String
- last_name: String
- role: Enum (customer, seller, admin)
- is_active: Boolean
- is_verified: Boolean
- created_at: DateTime
- updated_at: DateTime
```

### Product (–¢–æ–≤–∞—Ä—ã)
```python
- id: UUID
- seller_id: UUID (FK ‚Üí User)
- name: String
- description: Text
- price: Decimal
- quantity: Integer
- category: Enum
- image_urls: JSON
- is_active: Boolean
- rating: Float
- created_at: DateTime
- updated_at: DateTime
```

### Order (–ó–∞–∫–∞–∑—ã)
```python
- id: UUID
- user_id: UUID (FK ‚Üí User)
- status: Enum
- total_amount: Decimal
- delivery_method: Enum
- delivery_cost: Decimal
- delivery_address: String
- phone: String
- tracking_number: String
- created_at: DateTime
- updated_at: DateTime
```

### OrderItem (–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞)
```python
- id: UUID
- order_id: UUID (FK ‚Üí Order)
- product_id: UUID (FK ‚Üí Product)
- quantity: Integer
- price: Decimal
```

### Review (–û—Ç–∑—ã–≤—ã)
```python
- id: UUID
- product_id: UUID (FK ‚Üí Product)
- user_id: UUID (FK ‚Üí User)
- rating: Integer (1-5)
- comment: Text
- created_at: DateTime
```

### CartItem (–ö–æ—Ä–∑–∏–Ω–∞)
```python
- id: UUID
- user_id: UUID (FK ‚Üí User)
- product_id: UUID (FK ‚Üí Product)
- quantity: Integer
- added_at: DateTime
```

### WishlistItem (–ò–∑–±—Ä–∞–Ω–Ω–æ–µ)
```python
- id: UUID
- user_id: UUID (FK ‚Üí User)
- product_id: UUID (FK ‚Üí Product)
- added_at: DateTime
```

### Payment (–ü–ª–∞—Ç–µ–∂–∏)
```python
- id: UUID
- order_id: UUID (FK ‚Üí Order)
- amount: Decimal
- payment_method: Enum
- status: Enum
- transaction_id: String
- created_at: DateTime
- updated_at: DateTime
```

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
1. ‚úÖ **JWT —Ç–æ–∫–µ–Ω—ã** —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
2. ‚úÖ **Bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–∞—Ä–æ–ª–µ–π
3. ‚úÖ **Role-based access control** (RBAC)
4. ‚úÖ **Protected endpoints** —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–æ–∫–µ–Ω–æ–≤
5. ‚úÖ **Input validation** —á–µ—Ä–µ–∑ Pydantic
6. ‚úÖ **SQL injection protection** —á–µ—Ä–µ–∑ SQLAlchemy ORM
7. ‚úÖ **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
8. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞** –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π update/delete

---

## üöÄ –ó–ê–ü–£–°–ö –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
cd backend
python production_server.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞: `http://localhost:8001`

### 2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- Swagger UI: `http://localhost:8001/api/docs`
- ReDoc: `http://localhost:8001/api/redoc`

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
python complete_test.py
```

–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ endpoint'—ã –∏ –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ auth.py      # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ products.py  # –¢–æ–≤–∞—Ä—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ cart.py      # –ö–æ—Ä–∑–∏–Ω–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ orders.py    # –ó–∞–∫–∞–∑—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ reviews.py   # –û—Ç–∑—ã–≤—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ wishlist.py  # –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ payments.py  # –ü–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ admin.py     # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ seller.py    # –ü—Ä–æ–¥–∞–≤–µ—Ü –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ analytics.py # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.py      # JWT, –ø–∞—Ä–æ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.py     # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exceptions.py    # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py          # Base –º–æ–¥–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py        # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ session.py       # –°–µ—Å—Å–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py          # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ review.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ common.py
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ user_service.py       # –õ–æ–≥–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ product_service.py    # –õ–æ–≥–∏–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ order_service.py      # –õ–æ–≥–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ payment_service.py    # –õ–æ–≥–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ review_service.py     # –õ–æ–≥–∏–∫–∞ –æ—Ç–∑—ã–≤–æ–≤
‚îÇ       ‚îî‚îÄ‚îÄ email_service.py      # Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ production_server.py     # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ complete_test.py         # –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ ecommerce.db            # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
```

---

## üéØ –°–¢–ê–¢–£–° –ó–ê–í–ï–†–®–ï–ù–ò–Ø

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (100%)

| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | Endpoints | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª |
|--------|--------|-----------|------------|
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | ‚úÖ 100% | 3/3 | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –ø—Ä–æ—Ñ–∏–ª—å |
| –¢–æ–≤–∞—Ä—ã | ‚úÖ 100% | 5/5 | CRUD, –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä—ã |
| –ö–æ—Ä–∑–∏–Ω–∞ | ‚úÖ 100% | 5/5 | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ |
| –ó–∞–∫–∞–∑—ã | ‚úÖ 100% | 5/5 | –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| –û—Ç–∑—ã–≤—ã | ‚úÖ 100% | 4/4 | CRUD –æ—Ç–∑—ã–≤–æ–≤ |
| –ò–∑–±—Ä–∞–Ω–Ω–æ–µ | ‚úÖ 100% | 3/3 | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —É–¥–∞–ª–µ–Ω–∏–µ |
| –ü–ª–∞—Ç–µ–∂–∏ | ‚úÖ 100% | 3/3 | –°–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä |
| –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å | ‚úÖ 100% | 6/6 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| –ü–∞–Ω–µ–ª—å –ø—Ä–æ–¥–∞–≤—Ü–∞ | ‚úÖ 100% | 3/3 | –¢–æ–≤–∞—Ä—ã, –∑–∞–∫–∞–∑—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | ‚úÖ 100% | 4/4 | –ü—Ä–æ–¥–∞–∂–∏, —Ç–æ–≤–∞—Ä—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ |

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 41/41 endpoints (100%)**

---

## üìù –û–°–û–ë–ï–ù–ù–û–°–¢–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### EmailService (–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- üìß **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
- üîÑ **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SendGrid/Mailgun/SMTP
- ‚úÖ **–ì–æ—Ç–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
  - `send_welcome_email()` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
  - `send_order_confirmation_email()` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `send_order_status_update()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### PaymentService (–ü–ª–∞—Ç–µ–∂–∏)
- üí≥ **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –î–µ–º–æ-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- üîÑ **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kaspi, Stripe, PayPal
- ‚úÖ **–ì–æ—Ç–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
  - `create_payment()` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
  - `get_payment()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
  - `update_payment_status()` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

---

## üéì –ö–ê–ö –î–û–ë–ê–í–ò–¢–¨ –†–ï–ê–õ–¨–ù–£–Æ –ò–ù–¢–ï–ì–†–ê–¶–ò–Æ

### –ü—Ä–∏–º–µ—Ä: SendGrid –¥–ª—è email
```python
# –í email_service.py
import sendgrid
from sendgrid.helpers.mail import Mail

def send_welcome_email(email: str, name: str):
    sg = sendgrid.SendGridAPIClient(api_key=os.environ.get('SENDGRID_API_KEY'))
    message = Mail(
        from_email='noreply@bibarys.kz',
        to_emails=email,
        subject='–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Bibarys!',
        html_content=f'<p>–ü—Ä–∏–≤–µ—Ç, {name}!</p>'
    )
    response = sg.send(message)
```

### –ü—Ä–∏–º–µ—Ä: Kaspi –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
```python
# –í payment_service.py
import requests

def process_kaspi_payment(amount: Decimal, order_id: str):
    response = requests.post(
        'https://kaspi.kz/api/payments',
        json={
            'amount': float(amount),
            'order_id': order_id,
            'merchant_id': os.environ.get('KASPI_MERCHANT_ID')
        },
        headers={'Authorization': f'Bearer {os.environ.get("KASPI_API_KEY")}'}
    )
    return response.json()
```

---

## ‚ú® –ì–û–¢–û–í –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫:
1. ‚úÖ **–†–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞** - –≤—Å–µ API endpoints –≥–æ—Ç–æ–≤—ã
2. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é** - comprehensive test suite –≤–∫–ª—é—á–µ–Ω
3. ‚úÖ **–î–µ–ø–ª–æ—é** - –º–æ–∂–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** - Swagger UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
5. ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–∏—é** - —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä**: `python production_server.py`
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**: `python complete_test.py`
3. **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**: http://localhost:8001/api/docs
4. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API endpoints
5. **–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: Email, –ø–ª–∞—Ç–µ–∂–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

- üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: http://localhost:8001/api/docs
- üêõ –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: –í—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- üîç –û—Ç–ª–∞–¥–∫–∞: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `debug_jwt.py` –∏ `quick_test.py`

---

**Backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å ‚ù§Ô∏è –¥–ª—è Bibarys E-Commerce Platform**

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: 2024  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ PRODUCTION READY

