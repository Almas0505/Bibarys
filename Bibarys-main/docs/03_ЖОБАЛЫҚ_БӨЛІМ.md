# 2-БӨЛІМ. ЖҮЙЕНІ ЖОБАЛАУ

## 2.1. Ақпараттық жүйенің архитектурасы

Әзірленген веб-қосымша үш деңгейлі клиент-сервер архитектурасы негізінде құрылған. Бұл тәсіл жүйе компоненттері арасындағы жауапкершілікті бөлуді қамтамасыз етеді және болашақта масштабтауды жеңілдетеді. Жүйенің жалпы архитектуралық схемасы 1-суретте көрсетілген [1].

[СУРЕТ 1 ОРНЫ - Клиент-сервер архитектурасының схемасы]

1-сурет. Жүйенің клиент-сервер архитектурасы

(Схемада үш блок болуы керек: Client (React, Browser)  Server (FastAPI, Python)  Database (PostgreSQL))

Клиенттік деңгей (Presentation Layer) React кітапханасы негізінде жүзеге асырылды және пайдаланушының браузерінде орындалады. Бұл деңгей пайдаланушы интерфейсін көрсетуге, енгізілген деректерді алдын ала тексеруге және сервермен HTTP-сұраныстар арқылы өзара әрекеттесуге жауапты. Клиенттік бөліктің барлық логикасы TypeScript тілінде жазылған, бұл коддың сенімділігін арттырады және әзірлеу кезеңінде қателерді анықтауды жеңілдетеді [4].

Қосымша сервері (Application Layer) FastAPI фреймворкінде құрылған, ол бизнес-логиканы өңдейді және деректер базасымен байланысады. Серверлік бөлік клиенттен келген сұраныстарды қабылдайды, деректердің дұрыстығын тексереді, бизнес-ережелерді қолданады, дерекқормен операцияларды орындайды және нәтижені JSON форматында қайтарады. Аутентификация JWT-токендер арқылы жүзеге асырылады, бұл жүйенің қауіпсіздігін қамтамасыз етеді [9].

Деректер деңгейі (Data Layer) реляциялық дерекқорды қамтиды. Әзірлеу кезеңінде SQLite файлдық дерекқоры пайдаланылады, ал өндірістік ортада (production) PostgreSQL ДҚБЖ-ға ауысу қарастырылған. Бұл деңгей барлық бизнес-деректерді тұрақты сақтауға, деректер тұтастығын қамтамасыз етуге, транзакцияларды қолдауға және бір уақытта бірнеше пайдаланушының жұмысын басқаруға жауапты. SQLAlchemy ORM кітапханасы арқылы қолжетімділік дерекқормен жұмысты жеңілдетеді және SQL-инъекциялар сияқты қауіпсіздік қауіптерінен қорғайды. SQLAlchemy-дің артықшылығы - дерекқор түрін оңай ауыстыруға мүмкіндік береді, код өзгертусіз [2].

Компоненттер арасындағы өзара әрекеттесу келесі принциптер бойынша ұйымдастырылған. Клиент серверге тек стандартталған REST API эндпоинттері арқылы сұраныстар жібереді. Сервер дерекқормен тікелей жұмыс істейді, клиенттен деректер базасының құрылымы толық жасырылған. Әрбір қабат өзінің міндеттері үшін ғана жауапты, бұл кодты қолдауды және жаңа функционалды қосуды жеңілдетеді. Осындай архитектуралық шешім жүйенің ілінісін азайтады және әрбір деңгейді тәуелсіз дамытуға мүмкіндік береді [5].

---

## 2.2. Дерекқорды инфологиялық жобалау

Ақпараттық жүйенің дерекқоры реляциялық модель негізінде жобаланды. Әзірлеу кезеңінде SQLite файлдық дерекқоры пайдаланылады (бір файлда барлық деректер), ал өндірістік ортада PostgreSQL ДҚБЖ-ға көшу жоспарланған. SQLite дерекқоры әзірлеу үшін ыңғайлы - қосымша сервер орнатуды қажет етпейді, тез әрі жеңіл. Өндірістік ортада PostgreSQL деректердің тұтастығын, көп пайдаланушылы қол жетімділікті және жоғары өнімділікті қамтамасыз етеді. Жүйенің негізгі сущностьтары (entity) және олардың арасындағы байланыстар 2-суретте ER-диаграмма түрінде көрсетілген [7].

[СУРЕТ 2 ОРНЫ - ER-диаграмма]

2-сурет. Дерекқордың ER-диаграммасы

(ER-диаграмма users, products, orders, order_items, reviews, payments, wishlist, cart_items, transactions кестелерін және олардың байланыстарын көрсетуі керек)

Жобаланған дерекқор 9 негізгі кестеден тұрады. **Users** кестесі жүйе пайдаланушылары туралы ақпаратты сақтайды - email, хэштелген құпиясөз, рөлі (Admin/Seller/Customer), аты-жөні, телефон, аватар, виртуалды әмиян балансы. Құпиясөздер bcrypt алгоритмімен хэшталады. Әрбір пайдаланушыға уникалды идентификатор тағайындалады [10].

**Products** кестесі тауарлардың атауы, сипаттамасы, бағасы, қалдығы (quantity), санаты (enum: Electronics, Fashion, Food, т.б.), сатушы ID-сі, сурет URL-дері (JSON), рейтинг және қарау санын сақтайды. Санаттар enum түрінде жүзеге асырылған, бұл деректердің тұтастығын қамтамасыз етеді [20].

**Orders** кестесі тапсырыстарды тіркейді: тапсырыс күні, жалпы сомасы, пайдаланушы ID, мекенжай, төлем әдісі (Card/Cash/Wallet), төлем статусы (Pending/Paid/Failed), тапсырыс статусы (Pending/Processing/Shipped/Delivered/Cancelled). Транзакциялық тұтастықты қамтамасыз етеді [20].

**OrderItems** кестесі тапсырыстағы нақты тауарларды сипаттайды. Orders және Products кестелері арасындағы "көпке-көп" байланысын жүзеге асырады. Әрбір жазуда тапсырыс ID, тауар ID, саны, бағасы және жалпы сомасы сақталады [20].

**Reviews** кестесі тауарларға пікірлерді сақтайды: пайдаланушы ID, тауар ID, рейтинг (1-5), мәтіні, пікір күні. Бір пайдаланушы бір тауарға тек бір пікір қалдыра алады [21].

**Payments** кестесі төлем транзакцияларын тіркейді: тапсырыс ID, төлем әдісі, төлем статусы, сома, күні. Әрбір тапсырысқа төлем байланысқан.

**Wishlist** кестесі пайдаланушының тілектер тізімін сақтайды: пайдаланушы ID және тауар ID. Таңдаулы тау арларды жылдам табуға мүмкіндік береді.

**CartItems** кестесі сатып алу себетіндегі тауарларды сақтайды: пайдаланушы ID, тауар ID, саны. Пайдаланушы жүйеден шыққанНан кейін де себет сақталады.

**Transactions** кестесі әмиян операцияларын жазады: пайдаланушы ID, тапсырыс ID, түрі (Deposit/Withdrawal/Refund), сомасы, күні. Қаржылық аудитке мүмкіндік береді.

Дерекқорда деректер тұтастығын қамтамасыз ету үшін келесі шектеулер қойылған. Барлық негізгі кілттер (primary keys) автоматты өсетін уникалды идентификаторлар. Сыртқы кілттер (foreign keys) CASCADE опциясымен жабдықталған - негізгі жазу жойылған кезде байланысты жазулар да автоматты жойылады. Міндетті өрістерге NOT NULL шектеуі қойылған. Штрих-код, логин сияқты өрістерге UNIQUE шектеуі қойылған. Бағалар мен саны үшін оң сандар тексеруі (CHECK constraints) қолданылады [7].

Осындай дерекқор құрылымы тауарлар есебінің барлық негізгі бизнес-процестерін қолдауға мүмкіндік береді - тауарларды қосу және өңдеу, қалдықтарды автоматты жаңарту, сатылымдарды тіркеу, санаттар бойынша топтастыру, әрбір операцияны нақты қызметкерге байланыстыру, кез келген уақыт кесіндісі үшін есептерді генерациялау.

---

## 2.3. Бағдарламалық интерфейсті (API) жобалау

Серверлік бөлік REST API архитектуралық стилінде жүзеге асырылды. Клиент пен сервер арасындағы деректер алмасу JSON форматында жүреді. REST қағидалары бойынша әрбір ресурс (тауар, сатылым, пайдаланушы) уникалды URL мекенжайына ие, ал HTTP-әдістер (GET, POST, PUT, DELETE) операция түрін анықтайды. Бұл тәсіл API-ді түсінікті, масштабталатын және басқа жүйелермен интеграциялауға ыңғайлы етеді [22].

Жүйенің API интерфейсі функционалдық мақсаты бойынша бірнеше негізгі модульдерге бөлінген. Auth (Аутентификация) модулі пайдаланушыны тіркеу, жүйеге кіру және JWT-токен алу функцияларын қамтиды. Жүйеге кіру кезінде логин мен құпиясөз тексеріледі, дұрыс болған жағдайда сервер access token және refresh token генерациялайды. Access token сервердегі қорғалған ресурстарға қолжетімділік алу үшін пайдаланылады, ал refresh token оның мерзімі біткенде жаңартуға арналған [9].

Users (Пайдаланушылар) модулі қызметкерлер тізімін алу, жаңа қызметкер қосу, қызметкердің деректерін өңдеу және құқықтарын басқару функцияларын қамтиды. Тек әкімші рөлі бар пайдаланушылар жаңа қызметкерлерді қосуға және олардың рөлдерін өзгертуге құқығы бар. Құпиясөздер хэшталған түрде сақталады, оларды оқу немесе қайтару мүмкіндігі жоқ. Қызметкерді жою оның барлық сатылымдарының тарихын да жояды, сондықтан жүйе алдымен ескерту сұрайды [10].

Products (Тауарлар) модулі тауарларды қосу, өңдеу, жою, штрих-код бойынша іздеу, атауы бойынша сүзгілеу, санаттар бойынша топтастыру функцияларын ұсынады. Жаңа тауар қосқанда барлық міндетті өрістер толтырылуы тексеріледі, штрих-коды уникалдығына тексеріледі, санат идентификаторы дерекқорда бар-жоғы тексеріледі. Тауарды өңдеу кезінде қалдық пен бағаны өзгертуге болады. Тауарды жою тек оның ешбір сатылымда пайдаланылмаған жағдайында ғана мүмкін [8].

Sales (Сатылымдар) модулі жаңа сатылымды тіркеу, сатылымдар тарихын қарау, күн аралығы бойынша сүзгілеу, түсім туралы есептерді генерациялау функцияларын қамтиды. Жаңа сатылым жасау кезінде әрбір тауардың қалдығы жеткіліктілігіне тексеру жүргізіледі, сатылым дерекқорға жазылады, барлық тауарлардың қалдықтары автоматты азайтылады, чек нөмірі генерацияланады. Егер кез келген тауардың қалдығы жеткіліксіз болса, бүкіл транзакция қайтарылады (rollback) және қателік туралы хабарлама қайтарылады. Бұл деректер консистенттілігін қамтамасыз етеді [2].

Әрбір модуль CRUD (Create, Read, Update, Delete) операцияларын толық қолдайды. API эндпоинттерінің (маршруттарының) толық тізімі, сұраныс параметрлері және жауаптар құрылымы осы дипломдық жұмыстың А қосымшасында келтірілген. Барлық эндпоинттер стандартталған қателер форматын қолданады, HTTP статус кодтары семантикалық мағынасына сәйкес келеді - 200 сәтті операция үшін, 400 дұрыс емес деректер үшін, 401 аутентификация қажет үшін, 403 қолжетімділік тыйым салынған үшін, 404 ресурс табылмаған үшін, 500 серверлік қате үшін [22].

API құжаттамасы FastAPI құралдары арқылы автоматты генерацияланады. Әзірлеушілер /docs URL мекенжайы бойынша Swagger UI интерфейсін ашып, барлық қолжетімді эндпоинттерді көре алады, олардың параметрлерін оқи алады және тікелей браузерден тестілей алады. Бұл API-ді пайдалануды және жаңа әзірлеушілерді жобаға қосуды едәуір жеңілдетеді [20].

---

## 2.4. Пайдаланушы интерфейсін жобалау (UI/UX)

Пайдаланушы интерфейсі "минимализм" және "интуитивтілік" қағидаларына сәйкес әзірленді. Сатушының жұмыс процесін жылдамдату үшін артық элементтер алынып тасталды, интерфейс тек қажетті функцияларға шоғырланған. Түстер схемасы көздің шаршамауы үшін бейтарап сұр және көк реңктерде орындалған. Барлық басқару элементтері үлкен және анық, бұл сенсорлық экрандарда жұмысты жеңілдетеді.

Жүйеге кіру терезесі (3-сурет) пайдаланушыдан логин мен құпиясөзді сұрайды және қате енгізілген жағдайда хабарлама береді. Қауіпсіздік мақсатында құпиясөз өрісі символдарды жасырады, алайда пайдаланушы "көзді" басып оларды уақытша көрсете алады. Егер аутентификация сәтсіз болса, қызыл хабарлама "Логин немесе құпиясөз дұрыс емес" деп көрсетіледі. Сәтті кіруден кейін пайдаланушы автоматты түрде өз рөліне сәйкес бетке бағытталады - сатушылар POS-терминалға, әкімшілер әкімші панеліне [22].

[СУРЕТ 3 ОРНЫ - Логин беті скриншоты]

3-сурет. Жүйеге кіру терезесі

(Скриншот login page, қайда логин мен құпиясөз өрістері және "Кіру" батырмасы бар)

Жүйенің негізгі экраны  сатушының жұмыс орны (POS-терминал). Мұнда тауарларды іздеу, себетке қосу және сатуды рәсімдеу жүзеге асырылады (4-сурет). Экран екі бөлікке бөлінген - сол жағында тауарлар тізімі, оң жағында ағымдағы себет. Тауарларды іздеу өрісі нақты уақыт режимінде жұмыс істейді - пайдаланушы әріптерді теру кезінде тізім автоматты сүзгіленеді. Штрих-код сканері қосулы болса, ол автоматты танылады және тауар себетке қосылады [23].

[СУРЕТ 4 ОРНЫ - Негізгі жұмыс беті скриншоты]

4-сурет. Сатушының басты жұмыс терезесі

(Скриншот негізгі POS page, қайда тауарлар тізімі мен себет көрінеді)

Себетте әрбір тауар жеке жолда көрсетіледі - атауы, саны, бағасы және қосынды сома. Пайдаланушы саны өзгерте алады немесе тауарды себеттен жоя алады. Себеттің төменгі жағында жалпы сома үлкен шрифтпен көрсетіледі. "Төлем" батырмасын басқан кезде төлем түрін таңдау терезесі ашылады - қолма-қол ақша немесе карта. Төлем расталғаннан кейін чек басып шығарылады, себет тазаланады және қалдықтар автоматты жаңартылады [24].

Интерфейс бейімделгіш (responsive) болып табылады, яғни оны компьютерде де, планшетте де, смартфонда да қолдануға ыңғайлы. Экран өлшеміне қарай элементтердің орналасуы автоматты қайта құрылады. Кіші экрандарда тауарлар тізімі мен себет бір-бірінің үстінде орналасады, ал үлкен экрандарда жанама-жан. Tailwind CSS фреймворкі арқылы барлық қажетті breakpoint-тар жүзеге асырылған [25].

Қателер мен сәттілік туралы хабарландырулар экранның оң жоғарғы бұрышында toast-хабарламалар түрінде көрсетіледі. Мысалы, тауар себетке қосылған кезде жасыл хабарлама "Тауар қосылды" деп көрсетіледі, ал қалдық жеткіліксіз болса қызыл хабарлама "Қалдық жеткіліксіз" деп ескертеді. Хабарламалар 3 секундтан кейін автоматты жойылады, бірақ пайдаланушы оларды ертерек жаба алады.

Навигация жоғарғы менюде ұйымдастырылған. Сатушылар "Сату", "Тауарлар", "Тарих" беттеріне қолжетімділікке ие. Әкімшілер қосымша "Қызметкерлер", "Есептер", "Баптаулар" беттеріне қолжетімділікке ие. Ағымдағы бет түспен ерекшеленеді. Менюдің оң жағында пайдаланушының аты және "Шығу" батырмасы орналасқан.

---

## 2-БӨЛІМ БОЙЫНША ҚОРЫТЫНДЫЛАР

Жобалау бөлімінде жүйенің үш деңгейлі клиент-сервер архитектурасы сипатталды, ол компоненттер арасындағы жауапкершілікті бөлуді және болашақта масштабтауды қамтамасыз етеді. Дерекқордың реляциялық моделі жобаланды, негізгі кестелер мен олардың байланыстары ER-диаграмма түрінде көрсетілді.

REST API архитектурасы бойынша бағдарламалық интерфейс құрылды, ол Auth, Users, Products, Sales модульдеріне бөлінген және толық CRUD операцияларын қолдайды. Пайдаланушы интерфейсі минимализм және интуитивтілік қағидалары негізінде әзірленді, бейімделгіш дизайн әртүрлі құрылғылардан жұмысты қамтамасыз етеді.

Жобалау кезеңінде қабылданған шешімдер жүйенің сенімділігін, қауіпсіздігін, өнімділігін және пайдалану ыңғайлылығын қамтамасыз етеді.
